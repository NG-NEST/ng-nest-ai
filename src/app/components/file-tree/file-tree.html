<ul ngTree #tree="ngTree" [(values)]="selected" class="basic-tree">
  <ng-template [ngTemplateOutlet]="treeNodes" [ngTemplateOutletContext]="{ nodes: data(), parent: tree }" />
</ul>
<ng-template #treeNodes let-nodes="nodes" let-parent="parent">
  @for (node of nodes; track node.id) {
    <li
      ngTreeItem
      [parent]="parent"
      [value]="node.id"
      [label]="node.name"
      [disabled]="node.disabled"
      [(expanded)]="node.expanded"
      #treeItem="ngTreeItem"
    >
      @if (node.children) {
        <span aria-hidden="true" translate="no" (click)="node.expanded = !node.expanded" class="icon expand-icon">
          <x-icon type="fto-chevron-right"></x-icon>
        </span>
      } @else {
        <span aria-hidden="true" translate="no" class="icon">
          <x-icon [type]="node.name | appFileIcon"></x-icon>
        </span>
      }
      <span class="filename" [title]="node.id">{{ node.name }}</span>
    </li>
    @if (node.children) {
      <ul role="group">
        <ng-template ngTreeItemGroup [ownedBy]="treeItem" #group="ngTreeItemGroup">
          <ng-template
            [ngTemplateOutlet]="treeNodes"
            [ngTemplateOutletContext]="{ nodes: node.children, parent: group }"
          />
        </ng-template>
      </ul>
    }
  }
</ng-template>
